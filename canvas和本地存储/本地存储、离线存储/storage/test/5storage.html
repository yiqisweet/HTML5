<!doctype html>
<html>
<head>
<meta charset="gb2312">
<title>无标题文档</title>
</head>
<script>
window.onload = function(){

var oInput = document.getElementsByTagName('input');
	
	if(window.localStorage.getItem('user')){
		oInput[0].value = window.localStorage.getItem('user');
	};
	if(window.localStorage.getItem('email')){
		oInput[1].value = window.localStorage.getItem('email');
	};
	for( i = 2; i < oInput.length; i++ ){
		if( oInput[i].value == window.localStorage.getItem('fav'+i,oInput[i].value) ){
				oInput[i].checked = true;
		};
	}
	
	window.onunload = function(){
		
		if( oInput[0].value ){
			window.localStorage.setItem('user',oInput[0].value);
		};
		if( oInput[1].value ){
			window.localStorage.setItem('email',oInput[1].value);
		};
		for( i = 2; i < oInput.length; i++ ){
			if( oInput[i].checked == true ){
				window.localStorage.setItem('fav'+i,oInput[i].value);
				//alert("选中");
			}else{
				window.localStorage.setItem('fav'+i,' ');
			};
		}
	
	}
}
</script>
<body>
<!--
	本地存储实例应用
    	用户输入大量表单后，在未提交的情况下，无心关闭浏览器窗口
        重新打开页面的时候自动填充之前的表单信息。
-->
用户名：<input type="text"><br><br>
邮箱：<input type="text"><br><br>
爱好：<input type="checkbox" value="音乐">音乐 <input type="checkbox" value="看书">看书
</body>
</html>
